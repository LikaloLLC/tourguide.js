!function(t,e){var o={exports:{}};!function(t){var e=function(t,o){return this instanceof e?t instanceof e?t:((t="string"==typeof t?this.select(t,o):t)&&t.nodeName&&(t=[t]),void(this.nodes=this.slice(t))):new e(t,o)};e.prototype={get length(){return this.nodes.length}},e.prototype.nodes=[],e.prototype.addClass=function(){return this.eacharg(arguments,(function(t,e){t.classList.add(e)}))},e.prototype.adjacent=function(t,o,n){return"number"==typeof o&&(o=0===o?[]:new Array(o).join().split(",").map(Number.call,Number)),this.each((function(i,r){var s=document.createDocumentFragment();e(o||{}).map((function(o,n){return"string"==typeof(n="function"==typeof t?t.call(this,o,n,i,r):t)?this.generate(n):e(n)})).each((function(t){this.isInPage(t)?s.appendChild(e(t).clone().first()):s.appendChild(t)})),n.call(this,i,s)}))},e.prototype.after=function(t,e){return this.adjacent(t,e,(function(t,e){t.parentNode.insertBefore(e,t.nextSibling)}))},e.prototype.append=function(t,e){return this.adjacent(t,e,(function(t,e){t.appendChild(e)}))},e.prototype.args=function(t,e,o){return(t="string"!=typeof(t="function"==typeof t?t(e,o):t)?this.slice(t).map(this.str(e,o)):t).toString().split(/[\s,]+/).filter((function(t){return t.length}))},e.prototype.array=function(t){var o=this;return this.nodes.reduce((function(n,i,r){var s;return t?(s="string"==typeof(s=(s=t.call(o,i,r))||!1)?e(s):s)instanceof e&&(s=s.nodes):s=i.innerHTML,n.concat(!1!==s?s:[])}),[])},e.prototype.attr=function(t,e,o){return o=o?"data-":"",this.pairs(t,e,(function(t,e){return t.getAttribute(o+e)}),(function(t,e,n){n?t.setAttribute(o+e,n):t.removeAttribute(o+e)}))},e.prototype.before=function(t,e){return this.adjacent(t,e,(function(t,e){t.parentNode.insertBefore(e,t)}))},e.prototype.children=function(t){return this.map((function(t){return this.slice(t.children)})).filter(t)},e.prototype.clone=function(){return this.map((function(t,e){var o=t.cloneNode(!0),n=this.getAll(o);return this.getAll(t).each((function(t,e){for(var o in this.mirror)this.mirror[o]&&this.mirror[o](t,n.nodes[e])})),o}))},e.prototype.getAll=function(t){return e([t].concat(e("*",t).nodes))},e.prototype.mirror={},e.prototype.mirror.events=function(t,o){if(t._e)for(var n in t._e)t._e[n].forEach((function(t){e(o).on(n,t.callback)}))},e.prototype.mirror.select=function(t,o){e(t).is("select")&&(o.value=t.value)},e.prototype.mirror.textarea=function(t,o){e(t).is("textarea")&&(o.value=t.value)},e.prototype.closest=function(t){return this.map((function(o){do{if(e(o).is(t))return o}while((o=o.parentNode)&&o!==document)}))},e.prototype.data=function(t,e){return this.attr(t,e,!0)},e.prototype.each=function(t){return this.nodes.forEach(t.bind(this)),this},e.prototype.eacharg=function(t,e){return this.each((function(o,n){this.args(t,o,n).forEach((function(t){e.call(this,o,t)}),this)}))},e.prototype.empty=function(){return this.each((function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}))},e.prototype.filter=function(t){var o=t instanceof e?function(e){return-1!==t.nodes.indexOf(e)}:"function"==typeof t?t:function(e){return e.matches=e.matches||e.msMatchesSelector||e.webkitMatchesSelector,e.matches(t||"*")};return e(this.nodes.filter(o))},e.prototype.find=function(t){return this.map((function(o){return e(t||"*",o)}))},e.prototype.first=function(){return this.nodes[0]||!1},e.prototype.generate=function(t){return/^\s*<tr[> ]/.test(t)?e(document.createElement("table")).html(t).children().children().nodes:/^\s*<t(h|d)[> ]/.test(t)?e(document.createElement("table")).html(t).children().children().children().nodes:/^\s*</.test(t)?e(document.createElement("div")).html(t).children().nodes:document.createTextNode(t)},e.prototype.handle=function(){var t=this.slice(arguments).map((function(t){return"function"==typeof t?function(e){e.preventDefault(),t.apply(this,arguments)}:t}),this);return this.on.apply(this,t)},e.prototype.hasClass=function(){return this.is("."+this.args(arguments).join("."))},e.prototype.html=function(t){return void 0===t?this.first().innerHTML||"":this.each((function(e){e.innerHTML=t}))},e.prototype.is=function(t){return 0<this.filter(t).length},e.prototype.isInPage=function(t){return t!==document.body&&document.body.contains(t)},e.prototype.last=function(){return this.nodes[this.length-1]||!1},e.prototype.map=function(t){return t?e(this.array(t)).unique():this},e.prototype.not=function(t){return this.filter((function(o){return!e(o).is(t||!0)}))},e.prototype.off=function(t,o,n){var i=null==o&&null==n,r=null,s=o;return"string"==typeof o&&(r=o,s=n),this.eacharg(t,(function(t,o){e(t._e?t._e[o]:[]).each((function(e){(i||e.orig_callback===s&&e.selector===r)&&t.removeEventListener(o,e.callback)}))}))},e.prototype.on=function(t,o,n){function i(t,e){try{Object.defineProperty(t,"currentTarget",{value:e,configurable:!0})}catch(t){}}var r=null,s=o;function a(t){return o.apply(this,[t].concat(t.detail||[]))}return"string"==typeof o&&(r=o,s=n,o=function(t){var o=arguments;e(t.currentTarget).find(r).each((function(e){var r;e.contains(t.target)&&(r=t.currentTarget,i(t,e),n.apply(e,o),i(t,r))}))}),this.eacharg(t,(function(t,e){t.addEventListener(e,a),t._e=t._e||{},t._e[e]=t._e[e]||[],t._e[e].push({callback:a,orig_callback:s,selector:r})}))},e.prototype.pairs=function(t,e,o,n){var i;return void 0!==e&&(i=t,(t={})[i]=e),"object"==typeof t?this.each((function(e,o){for(var i in t)"function"==typeof t[i]?n(e,i,t[i](e,o)):n(e,i,t[i])})):this.length?o(this.first(),t):""},e.prototype.param=function(t){return Object.keys(t).map(function(e){return this.uri(e)+"="+this.uri(t[e])}.bind(this)).join("&")},e.prototype.parent=function(t){return this.map((function(t){return t.parentNode})).filter(t)},e.prototype.prepend=function(t,e){return this.adjacent(t,e,(function(t,e){t.insertBefore(e,t.firstChild)}))},e.prototype.remove=function(){return this.each((function(t){t.parentNode&&t.parentNode.removeChild(t)}))},e.prototype.removeClass=function(){return this.eacharg(arguments,(function(t,e){t.classList.remove(e)}))},e.prototype.replace=function(t,o){var n=[];return this.adjacent(t,o,(function(t,e){n=n.concat(this.slice(e.children)),t.parentNode.replaceChild(e,t)})),e(n)},e.prototype.scroll=function(){return this.first().scrollIntoView({behavior:"smooth"}),this},e.prototype.select=function(t,o){return t=t.replace(/^\s*/,"").replace(/\s*$/,""),/^</.test(t)?e().generate(t):(o||document).querySelectorAll(t)},e.prototype.serialize=function(){var t=this;return this.slice(this.first().elements).reduce((function(o,n){return!n.name||n.disabled||"file"===n.type||/(checkbox|radio)/.test(n.type)&&!n.checked?o:"select-multiple"===n.type?(e(n.options).each((function(e){e.selected&&(o+="&"+t.uri(n.name)+"="+t.uri(e.value))})),o):o+"&"+t.uri(n.name)+"="+t.uri(n.value)}),"").slice(1)},e.prototype.siblings=function(t){return this.parent().children(t).not(this)},e.prototype.size=function(){return this.first().getBoundingClientRect()},e.prototype.slice=function(t){return t&&0!==t.length&&"string"!=typeof t&&"[object Function]"!==t.toString()?t.length?[].slice.call(t.nodes||t):[t]:[]},e.prototype.str=function(t,e){return function(o){return"function"==typeof o?o.call(this,t,e):o.toString()}},e.prototype.text=function(t){return void 0===t?this.first().textContent||"":this.each((function(e){e.textContent=t}))},e.prototype.toggleClass=function(t,e){return!!e===e?this[e?"addClass":"removeClass"](t):this.eacharg(t,(function(t,e){t.classList.toggle(e)}))},e.prototype.trigger=function(t){var e=this.slice(arguments).slice(1);return this.eacharg(t,(function(t,o){var n,i={bubbles:!0,cancelable:!0,detail:e};try{n=new window.CustomEvent(o,i)}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(o,!0,!0,e)}t.dispatchEvent(n)}))},e.prototype.unique=function(){return e(this.nodes.reduce((function(t,e){return null!=e&&!1!==e&&-1===t.indexOf(e)?t.concat(e):t}),[]))},e.prototype.uri=function(t){return encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.prototype.wrap=function(t){return this.map((function(o){return e(t).each((function(t){(function(t){for(;t.firstElementChild;)t=t.firstElementChild;return e(t)})(t).append(o.cloneNode(!0)),o.parentNode.replaceChild(t,o)}))}))},t.exports&&(t.exports=e,t.exports.u=e)}(o);var n=o.exports;class i{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.identifier=t}identifier=""}function r(t,e){if(!t)throw`TourguideJS: ${e}`;return!0}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return e=isNaN(e)?t:e,o=isNaN(o)?t:o,Math.max(e,Math.min(t,o))}let a,u;var c;function l(){return Math.max(...Array.from(document.querySelectorAll("body *"),(t=>parseFloat(window.getComputedStyle(t).zIndex))).filter((t=>!Number.isNaN(t))),0)}let d;!function(t){function e(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return[parseInt(e?.[1]||"",16),parseInt(e?.[2]||"",16),parseInt(e?.[3]||"",16)]}function o(t){const e=t.toString(16);return 1==e.length?"0"+e:e}function n(t,e,n){return"#"+o(Math.floor(t))+o(Math.floor(e))+o(Math.floor(n))}function i(t,e,o){t/=255,e/=255,o/=255;const n=Math.max(t,e,o),i=n-Math.min(t,e,o),r=i?n===t?(e-o)/i:n===e?2+(o-t)/i:4+(t-e)/i:0;return[60*r<0?60*r+360:60*r,100*(i?n<=.5?i/(2*n-i):i/(2-(2*n-i)):0),100*(2*n-i)/2]}function r(t,e,o){o/=100;const n=e=>(e+t/30)%12,i=(e/=100)*Math.min(o,1-o),r=t=>o-i*Math.max(-1,Math.min(n(t)-3,Math.min(9-n(t),1)));return[255*r(0),255*r(8),255*r(4)]}function a(t){return i(...e(t))}function u(t,e,o){return n(...r(t,e,o))}function c(t,e,o,n){const i=a(t);return i[0]=s(i[0]*e,0,255),i[1]=s(i[1]*o,0,255),i[2]=s(i[2]*n,0,255),u(...i)}t.hexToRGB=e,t.componentToHex=o,t.rgbToHex=n,t.RGBToHSL=i,t.HSLToRGB=r,t.hexToHSL=a,t.HSLToHex=u,t.adjust=c,t.setAutoColors=function(t,e){const o=Object.assign(t,e||{}),n=/Color$/,{accentColor:i=""}=o;return Object.keys(o).filter((t=>n.test(t)&&"auto"===o[t])).forEach((t=>{switch(t){case"focusColor":case"stepButtonNextColor":case"stepButtonCompleteColor":case"bulletCurrentColor":o[t]=i;break;case"bulletColor":o[t]=c(i,1,.8,1.4);break;case"bulletVisitedColor":o[t]=c(i,1,.3,1.2);break;case"stepButtonPrevColor":case"stepButtonCloseColor":o[t]=c(i,1,.2,.8)}})),o}}(a||(a={})),(c=u||(u={})).getStyle=function(t,e){const o=n(t).first();try{return getComputedStyle(o).getPropertyValue(e)}catch(t){return""}},c.setStyle=function(t,e){const o={};return Object.keys(e).forEach((t=>{o[t]=e[t]+""})),Object.assign(n(t).first().style,o),t},c.colorObjToStyleVarString=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--tourguide",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":host";const n=[];return Object.entries(t).forEach((t=>{let[o,i]=t;const r=[e];let s=0;for(let t=0;t<o.length;t+=1)"A"<=o[t]&&o[t]<="Z"&&(r.push(o.substring(s,t).toLowerCase()),s=t);r.push(o.substring(s,o.length).toLowerCase()),n.push(`${r.join("-")}: ${i}`)})),`${o} {\n${n.join(";\n")};\n}`},function(t){function e(t,e,o){t.scrollTo(e,o)}t.getScrollCoordinates=function(t){const e=[];let o;o=n(t);do{o||(o=!1),o.first()||(o=!1);try{const t=o.first(),n=o.size();t.scrollHeight===n?.height&&t.scrollWidth===n?.width||e.push({element:t,x:t.scrollLeft,y:t.scrollTop}),o=o.parent()}catch(t){o=!1}}while(o);return e},t.setElementScroll=e,t.animateScroll=function(t,o){const n=Date.now();function i(t,r,s,a){if(!t)return void console.warn(`target element ${t} not found, skip`);const u=Date.now()-n,c=Math.min(1/o*u,1),l=1-(d=c,1-Math.pow(1-d,d/2));var d;if(e(t,r-(r-t.scrollLeft)*l,s-(s-t.scrollTop)*l),u>=o)return e(t,r,s),a(!0);var p;p=i.bind(null,t,r,s,a),"requestAnimationFrame"in window?window.requestAnimationFrame(p):setTimeout(p,16)}return Promise.all(t.map((t=>new Promise((e=>i(t.element,t.x,t.y,e))))))},t.smoothScroll=function(t,e){return new Promise((o=>{if(!t)return o(!1);const n=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&(n.disconnect(),setTimeout((()=>o(!0)),100))}))}),{root:null,threshold:.5});n.observe(t),t.scrollIntoView(Object.assign({behavior:"auto"},e))}))}}(d||(d={}));const p=["start","end"],h=["top","right","bottom","left"].reduce(((t,e)=>t.concat(e,e+"-"+p[0],e+"-"+p[1])),[]),g=Math.min,f=Math.max,m=Math.round,y=t=>({x:t,y:t}),v={left:"right",right:"left",bottom:"top",top:"bottom"},b={start:"end",end:"start"};function x(t,e){return"function"==typeof t?t(e):t}function w(t){return t.split("-")[0]}function _(t){return t.split("-")[1]}function k(t){return"y"===t?"height":"width"}function C(t){return["top","bottom"].includes(w(t))?"y":"x"}function S(t){return"x"===C(t)?"y":"x"}function $(t){return t.replace(/left|right|bottom|top/g,(t=>v[t]))}function E(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function T(t,e,o){let{reference:n,floating:i}=t;const r=C(e),s=S(e),a=k(s),u=w(e),c="y"===r,l=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,p=n[a]/2-i[a]/2;let h;switch(u){case"top":h={x:l,y:n.y-i.height};break;case"bottom":h={x:l,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:d};break;case"left":h={x:n.x-i.width,y:d};break;default:h={x:n.x,y:n.y}}switch(_(e)){case"start":h[s]-=p*(o&&c?-1:1);break;case"end":h[s]+=p*(o&&c?-1:1)}return h}function L(t,e,o){return(t?[...o.filter((e=>_(e)===t)),...o.filter((e=>_(e)!==t))]:o.filter((t=>w(t)===t))).filter((o=>!t||(_(o)===t||!!e&&function(t){return t.replace(/start|end/g,(t=>b[t]))}(o)!==o)))}const N=function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,async fn(e){var o,n,i;const{rects:r,middlewareData:s,placement:a,platform:u,elements:c}=e,{crossAxis:l=!1,alignment:d,allowedPlacements:p=h,autoAlignment:g=!0,...f}=x(t,e),m=void 0!==d||p===h?L(d||null,g,p):p,y=await async function(t,e){var o;void 0===e&&(e={});const{x:n,y:i,platform:r,rects:s,elements:a,strategy:u}=t,{boundary:c="clippingAncestors",rootBoundary:l="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=x(e,t),g=function(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}(h),f=a[p?"floating"===d?"reference":"floating":d],m=E(await r.getClippingRect({element:null==(o=await(null==r.isElement?void 0:r.isElement(f)))||o?f:f.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:l,strategy:u})),y="floating"===d?{...s.floating,x:n,y:i}:s.reference,v=await(null==r.getOffsetParent?void 0:r.getOffsetParent(a.floating)),b=await(null==r.isElement?void 0:r.isElement(v))&&await(null==r.getScale?void 0:r.getScale(v))||{x:1,y:1},w=E(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:v,strategy:u}):y);return{top:(m.top-w.top+g.top)/b.y,bottom:(w.bottom-m.bottom+g.bottom)/b.y,left:(m.left-w.left+g.left)/b.x,right:(w.right-m.right+g.right)/b.x}}(e,f),v=(null==(o=s.autoPlacement)?void 0:o.index)||0,b=m[v];if(null==b)return{};const C=function(t,e,o){void 0===o&&(o=!1);const n=_(t),i=S(t),r=k(i);let s="x"===i?n===(o?"end":"start")?"right":"left":"start"===n?"bottom":"top";return e.reference[r]>e.floating[r]&&(s=$(s)),[s,$(s)]}(b,r,await(null==u.isRTL?void 0:u.isRTL(c.floating)));if(a!==b)return{reset:{placement:m[0]}};const T=[y[w(b)],y[C[0]],y[C[1]]],N=[...(null==(n=s.autoPlacement)?void 0:n.overflows)||[],{placement:b,overflows:T}],j=m[v+1];if(j)return{data:{index:v+1,overflows:N},reset:{placement:j}};const R=N.map((t=>{const e=_(t.placement);return[t.placement,e&&l?t.overflows.slice(0,2).reduce(((t,e)=>t+e),0):t.overflows[0],t.overflows]})).sort(((t,e)=>t[1]-e[1])),P=(null==(i=R.filter((t=>t[2].slice(0,_(t[0])?2:3).every((t=>t<=0))))[0])?void 0:i[0])||R[0][0];return P!==a?{data:{index:v+1,overflows:N},reset:{placement:P}}:{}}}};const j=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,i=await async function(t,e){const{placement:o,platform:n,elements:i}=t,r=await(null==n.isRTL?void 0:n.isRTL(i.floating)),s=w(o),a=_(o),u="y"===C(o),c=["left","top"].includes(s)?-1:1,l=r&&u?-1:1,d=x(e,t);let{mainAxis:p,crossAxis:h,alignmentAxis:g}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&"number"==typeof g&&(h="end"===a?-1*g:g),u?{x:h*l,y:p*c}:{x:p*c,y:h*l}}(e,t);return{x:o+i.x,y:n+i.y,data:i}}}};function R(t){return O(t)?(t.nodeName||"").toLowerCase():"#document"}function P(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function M(t){var e;return null==(e=(O(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function O(t){return t instanceof Node||t instanceof P(t).Node}function A(t){return t instanceof Element||t instanceof P(t).Element}function D(t){return t instanceof HTMLElement||t instanceof P(t).HTMLElement}function z(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof P(t).ShadowRoot)}function H(t){const{overflow:e,overflowX:o,overflowY:n,display:i}=q(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function B(t){return["table","td","th"].includes(R(t))}function I(t){const e=F(),o=q(t);return"none"!==o.transform||"none"!==o.perspective||!!o.containerType&&"normal"!==o.containerType||!e&&!!o.backdropFilter&&"none"!==o.backdropFilter||!e&&!!o.filter&&"none"!==o.filter||["transform","perspective","filter"].some((t=>(o.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(o.contain||"").includes(t)))}function F(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function V(t){return["html","body","#document"].includes(R(t))}function q(t){return P(t).getComputedStyle(t)}function W(t){return A(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function K(t){if("html"===R(t))return t;const e=t.assignedSlot||t.parentNode||z(t)&&t.host||M(t);return z(e)?e.host:e}function X(t){const e=K(t);return V(e)?t.ownerDocument?t.ownerDocument.body:t.body:D(e)&&H(e)?e:X(e)}function G(t,e){var o;void 0===e&&(e=[]);const n=X(t),i=n===(null==(o=t.ownerDocument)?void 0:o.body),r=P(n);return i?e.concat(r,r.visualViewport||[],H(n)?n:[]):e.concat(n,G(n))}function J(t){const e=q(t);let o=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=D(t),r=i?t.offsetWidth:o,s=i?t.offsetHeight:n,a=m(o)!==r||m(n)!==s;return a&&(o=r,n=s),{width:o,height:n,$:a}}function Y(t){return A(t)?t:t.contextElement}function U(t){const e=Y(t);if(!D(e))return y(1);const o=e.getBoundingClientRect(),{width:n,height:i,$:r}=J(e);let s=(r?m(o.width):o.width)/n,a=(r?m(o.height):o.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const Z=y(0);function Q(t){const e=P(t);return F()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Z}function tt(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o=!1);const i=t.getBoundingClientRect(),r=Y(t);let s=y(1);e&&(n?A(n)&&(s=U(n)):s=U(t));const a=function(t,e,o){return void 0===e&&(e=!1),!(!o||e&&o!==P(t))&&e}(r,o,n)?Q(r):y(0);let u=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,l=i.width/s.x,d=i.height/s.y;if(r){const t=P(r),e=n&&A(n)?P(n):n;let o=t.frameElement;for(;o&&n&&e!==t;){const t=U(o),e=o.getBoundingClientRect(),n=q(o),i=e.left+(o.clientLeft+parseFloat(n.paddingLeft))*t.x,r=e.top+(o.clientTop+parseFloat(n.paddingTop))*t.y;u*=t.x,c*=t.y,l*=t.x,d*=t.y,u+=i,c+=r,o=P(o).frameElement}}return E({width:l,height:d,x:u,y:c})}function et(t){return tt(M(t)).left+W(t).scrollLeft}function ot(t,e,o){let n;if("viewport"===e)n=function(t,e){const o=P(t),n=M(t),i=o.visualViewport;let r=n.clientWidth,s=n.clientHeight,a=0,u=0;if(i){r=i.width,s=i.height;const t=F();(!t||t&&"fixed"===e)&&(a=i.offsetLeft,u=i.offsetTop)}return{width:r,height:s,x:a,y:u}}(t,o);else if("document"===e)n=function(t){const e=M(t),o=W(t),n=t.ownerDocument.body,i=f(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),r=f(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let s=-o.scrollLeft+et(t);const a=-o.scrollTop;return"rtl"===q(n).direction&&(s+=f(e.clientWidth,n.clientWidth)-i),{width:i,height:r,x:s,y:a}}(M(t));else if(A(e))n=function(t,e){const o=tt(t,!0,"fixed"===e),n=o.top+t.clientTop,i=o.left+t.clientLeft,r=D(t)?U(t):y(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:i*r.x,y:n*r.y}}(e,o);else{const o=Q(t);n={...e,x:e.x-o.x,y:e.y-o.y}}return E(n)}function nt(t,e){const o=K(t);return!(o===e||!A(o)||V(o))&&("fixed"===q(o).position||nt(o,e))}function it(t,e,o){const n=D(e),i=M(e),r="fixed"===o,s=tt(t,!0,r,e);let a={scrollLeft:0,scrollTop:0};const u=y(0);if(n||!n&&!r)if(("body"!==R(e)||H(i))&&(a=W(e)),n){const t=tt(e,!0,r,e);u.x=t.x+e.clientLeft,u.y=t.y+e.clientTop}else i&&(u.x=et(i));return{x:s.left+a.scrollLeft-u.x,y:s.top+a.scrollTop-u.y,width:s.width,height:s.height}}function rt(t,e){return D(t)&&"fixed"!==q(t).position?e?e(t):t.offsetParent:null}function st(t,e){const o=P(t);if(!D(t))return o;let n=rt(t,e);for(;n&&B(n)&&"static"===q(n).position;)n=rt(n,e);return n&&("html"===R(n)||"body"===R(n)&&"static"===q(n).position&&!I(n))?o:n||function(t){let e=K(t);for(;D(e)&&!V(e);){if(I(e))return e;e=K(e)}return null}(t)||o}const at={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const i=D(o),r=M(o);if(o===r)return e;let s={scrollLeft:0,scrollTop:0},a=y(1);const u=y(0);if((i||!i&&"fixed"!==n)&&(("body"!==R(o)||H(r))&&(s=W(o)),D(o))){const t=tt(o);a=U(o),u.x=t.x+o.clientLeft,u.y=t.y+o.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-s.scrollLeft*a.x+u.x,y:e.y*a.y-s.scrollTop*a.y+u.y}},getDocumentElement:M,getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:i}=t;const r=[..."clippingAncestors"===o?function(t,e){const o=e.get(t);if(o)return o;let n=G(t).filter((t=>A(t)&&"body"!==R(t))),i=null;const r="fixed"===q(t).position;let s=r?K(t):t;for(;A(s)&&!V(s);){const e=q(s),o=I(s);o||"fixed"!==e.position||(i=null),(r?!o&&!i:!o&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||H(s)&&!o&&nt(t,s))?n=n.filter((t=>t!==s)):i=e,s=K(s)}return e.set(t,n),n}(e,this._c):[].concat(o),n],s=r[0],a=r.reduce(((t,o)=>{const n=ot(e,o,i);return t.top=f(n.top,t.top),t.right=g(n.right,t.right),t.bottom=g(n.bottom,t.bottom),t.left=f(n.left,t.left),t}),ot(e,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:st,getElementRects:async function(t){let{reference:e,floating:o,strategy:n}=t;const i=this.getOffsetParent||st,r=this.getDimensions;return{reference:it(e,await i(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return J(t)},getScale:U,isElement:A,isRTL:function(t){return"rtl"===q(t).direction}},ut=(t,e,o)=>{const n=new Map,i={platform:at,...o},r={...i.platform,_c:n};return(async(t,e,o)=>{const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:s}=o,a=r.filter(Boolean),u=await(null==s.isRTL?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:l,y:d}=T(c,n,u),p=n,h={},g=0;for(let o=0;o<a.length;o++){const{name:r,fn:f}=a[o],{x:m,y:y,data:v,reset:b}=await f({x:l,y:d,initialPlacement:n,placement:p,strategy:i,middlewareData:h,rects:c,platform:s,elements:{reference:t,floating:e}});l=null!=m?m:l,d=null!=y?y:d,h={...h,[r]:{...h[r],...v}},b&&g<=50&&(g++,"object"==typeof b&&(b.placement&&(p=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:l,y:d}=T(c,p,u))),o=-1)}return{x:l,y:d,placement:p,strategy:i,middlewareData:h}})(t,e,{...i,platform:r})};function ct(){const t=window.scrollY,e=window.scrollX,o=window.innerWidth,n=window.innerHeight;return{x:e,y:t,left:e,top:t,bottom:t+n,right:e+o,width:o,height:n}}let lt;!function(t){function e(t){switch(t.placement.split("-")[0]){case"top":return 24;case"left":case"right":return 20;default:return 10}}t.keepinview=t=>{let{padding:e=0}=t;return{name:"keepinview",fn(t){let{x:o,y:n,rects:i,middlewareData:r}=t;const a=ct(),u=s(o,a.left+e,a.right-i.floating.width-e),c=s(n,a.top+e,a.bottom-i.floating.height-e),l=o-u,d=n-c,{arrow:p}=r;return p&&(p.x&&l&&(p.x+=l),p.y&&d&&(p.y+=d)),{x:u,y:c}}}},t.positionfixed=t=>({name:"positionInView",options:t,fn(e){let{x:o,y:n,rects:i,elements:r}=e,s=o,a=n;const{placement:u="middle-center",padding:c=0}=t||{},{width:l,height:d}=ct(),[p,h]=u.split("-");switch(h){case"start":s=c;break;case"center":s=l/2-i.floating.width/2;break;case"end":s=l-i.floating.width-c}switch(p){case"top":a=c;break;case"middle":a=d/2-i.floating.height/2;break;case"bottom":a=d-i.floating.height-c}return r.floating.style.position="fixed",{x:s,y:a}}}),t.positionabsolute=()=>({name:"positionabsolute",fn(t){let{elements:e}=t;return e.floating.style.position="absolute",{data:{}}}}),t.highlight=t=>({name:"highlight",options:t,fn(e){const{element:o,padding:n=0,centered:i=!1}=t||{},{rects:r}=e,s={top:"0",left:"0",width:"0",height:"0"};return i?(s.top="50vh",s.left="50vw",s.width="0",s.height="0"):(s.top=r.reference.y-n+"px",s.left=r.reference.x-n+"px",s.width=`${r.reference.width+2*n}px`,s.height=`${r.reference.height+2*n}px`),u.setStyle(o,s),{data:s}}}),t.offsetAssist=e,t.offset=j(e),t.position=function(t,e){return ut(t,e,{middleware:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]}).then((t=>(u.setStyle(e,{left:`${t.x}px`,top:`${t.y}px`}),t)))},t.autoPlacement=N,t.arrow=t=>({name:"arrow",options:t,fn(e){const{element:o,padding:n=0}=t||{},{rects:i,placement:r}=e,s={top:"0",left:"0"};switch(r){case"left-start":s.top=n+"px",s.left=i.floating.width+"px";break;case"left-end":s.top=i.floating.height-n+"px",s.left=i.floating.width+"px";break;case"right-start":s.top=n+"px";break;case"right-end":s.top=i.floating.height-n+"px";break;case"top-start":s.top=i.floating.height+"px",s.left=n+"px";break;case"top-end":s.top=i.floating.height+"px",s.left=i.floating.width-n+"px";break;case"bottom-start":s.left=n+"px";break;case"bottom-end":s.left=i.floating.width-n+"px"}return u.setStyle(o,s),{data:s}}})}(lt||(lt={}));var dt=Object.freeze({__proto__:null,assert:r,clamp:s,get Color(){return a},get Style(){return u},getMaxZIndex:l,get Scroll(){return d},get Position(){return lt}});class pt{static Type="default";static Style="";uid=(()=>function(){const t=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return`${t()}${t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}())();index=0;active=!1;first=!1;last=!1;constructor(t,e){this.data=t,this.context=e}show(){!this.active&&(this.active=!0)}hide(){this.active&&(this.active=!1)}}var ht=Object.freeze({__proto__:null,AbstractCacheManager:i,Step:pt});const gt={layout:"vertical",image:"",title:"",content:"",actions:[],index:0,selector:void 0,navigation:!0,alignment:"start",hidden:!1};class ft extends pt{static Style=".guided-tour-step {\n  display: none;\n  opacity: 0;\n}\n.guided-tour-step .guided-tour-step-clickblock {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  pointer-events: all;\n}\n.guided-tour-step.active {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: all;\n  transition: opacity 150ms;\n}\n.guided-tour-step.active .guided-tour-step-highlight {\n  position: absolute;\n  box-sizing: border-box;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1em var(--tourguide-overlay-color);\n  z-index: 1;\n}\n.guided-tour-step.active .guided-tour-step-tooltip {\n  position: absolute;\n  z-index: 2;\n  background-color: var(--tourguide-background-color);\n  width: var(--tourguide-tooltip-width);\n  max-width: max-content;\n  border-radius: 5px;\n  box-sizing: border-box;\n  box-shadow: 0 0 2.5em -0.8em #000, 0 0 10px -5px #000, 0 0 3px -1px #000;\n  transition: opacity 150ms;\n}\n@media screen and (max-width: 760px) {\n  .guided-tour-step.active .guided-tour-step-tooltip {\n    max-width: 85vw;\n    width: max-content !important;\n  }\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-arrow {\n  position: absolute;\n  width: 14px;\n  height: 14px;\n  background: var(--tourguide-background-color);\n  z-index: -1;\n  transform: rotate(45deg);\n  pointer-events: none;\n  margin-left: -7px;\n  margin-top: -7px;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-arrow.no-arrow {\n  display: none;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content-container {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  height: calc(100% - 2.6em);\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-image {\n  flex-grow: 1;\n  flex-shrink: 1;\n  overflow: hidden;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-image img {\n  width: 100%;\n  height: 100%;\n  border-radius: 4px 4px 0 0;\n  object-fit: cover;\n  object-position: center;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content-wrapper {\n  margin: 1.2em 1.5em;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-title {\n  font-size: 130%;\n  margin-bottom: 0.5em;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content {\n  flex-shrink: 0;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content b,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content strong {\n  font-weight: bold;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content i,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content em {\n  font-style: italic;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content a {\n  cursor: pointer;\n  text-decoration: underline;\n  color: var(--tourguide-accent-color);\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content mark {\n  background: inherit;\n  text-shadow: 0px 2px 4px #ff0;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content code,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content dfn {\n  padding: 1px 6px 1px 4px;\n  border-radius: 4px;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content code {\n  background-color: #f0f0f0;\n  color: #e83e8c;\n  font-family: monospace;\n  font-size: 87.5%;\n  word-break: break-word;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content dfn {\n  font-style: italic;\n  background-color: #ffc6e5;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content p,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ul,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ol,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content blockquote {\n  margin: 1em 0;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content p:last-child,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ul:last-child,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ol:last-child,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content blockquote:last-child {\n  margin-bottom: 0;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content blockquote {\n  padding-left: 1em;\n  border-left: 4px solid silver;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ul,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ol {\n  padding-left: 1.5em;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ul li,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-content ol li {\n  margin: 0.3em 0;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions {\n  display: flex;\n  column-gap: 0.5em;\n  margin-top: 1.5em;\n  justify-content: end;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions .button {\n  color: var(--tourguide-accent-color);\n  padding: 0.5em 1em;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions .button.primary {\n  background: var(--tourguide-accent-color);\n  padding: 0.5em 1.5em;\n  color: #fff;\n  border-radius: 4px;\n  font-size: 110%;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions .button.primary:hover, .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-actions .button.primary:focus {\n  filter: brightness(120%);\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-icon {\n  display: inline-block;\n  overflow: hidden;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button {\n  flex-direction: column;\n  justify-content: center;\n  /* <-- actual veertical align */\n  display: inline-flex;\n  text-align: center;\n  cursor: pointer;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button .guided-tour-icon {\n  align-self: center;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-close {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 2em;\n  height: 2em;\n  color: var(--tourguide-step-button-close-color);\n  border-radius: 50%;\n  background-color: black;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-prev,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-next,\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-complete {\n  width: 36px;\n  height: 36px;\n  background: var(--tourguide-background-color);\n  border-radius: 50%;\n  margin-top: -18px;\n  position: absolute;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-prev {\n  color: var(--tourguide-step-button-prev-color);\n  left: 0;\n  transform: translateX(-50%);\n  top: 50%;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-next {\n  color: var(--tourguide-step-button-next-color);\n  right: 0;\n  transform: translateX(50%);\n  top: 50%;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-button-complete {\n  color: var(--tourguide-step-button-complete-color);\n  right: 0;\n  transform: translateX(50%);\n  top: 50%;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-footer {\n  flex-shrink: 0;\n  flex-grow: 0;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets {\n  text-align: center;\n  line-height: 16px;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul {\n  list-style: none;\n  margin: -0.5em 1em 0.5em;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul li {\n  display: inline-block;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul li button {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  display: inline-block;\n  background-color: var(--tourguide-bullet-color);\n  border: 8px solid var(--tourguide-background-color);\n  box-sizing: content-box;\n  cursor: pointer;\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul li button.complete {\n  background-color: var(--tourguide-bullet-visited-color);\n}\n.guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner .guided-tour-step-bullets ul li button.current {\n  background-color: var(--tourguide-bullet-current-color);\n}\n@media screen and (min-width: 760px) {\n  .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner.step-layout-horizontal .guided-tour-step-content-container {\n    flex-direction: row;\n    height: 100%;\n  }\n  .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner.step-layout-horizontal .guided-tour-step-content-container .guided-tour-step-content-wrapper {\n    flex: 1 1 auto;\n  }\n  .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner.step-layout-horizontal .guided-tour-step-content-container .guided-tour-step-image {\n    width: 50%;\n    margin-bottom: -24px;\n    flex: 0 0 auto;\n  }\n  .guided-tour-step.active .guided-tour-step-tooltip .guided-tour-step-tooltip-inner.step-layout-horizontal .guided-tour-step-content-container .guided-tour-step-image img {\n    border-radius: 4px 0 0 4px;\n    height: 100%;\n    object-fit: cover;\n    object-position: center;\n  }\n}";get _image(){return this.context.helpers.u(`<figure class="guided-tour-step-image">${this.data.image?`<img src="${this.data.image}" />`:""}</figure>`)}get _content(){const t=this.context.helpers.u(`<div class="guided-tour-step-content-wrapper">\n                <div id="tooltip-title-${this.data.index}" role="heading" class="guided-tour-step-title">${this.data.title}</div>\n                <div class="guided-tour-step-content">${this.data.content}</div>\n            </div>`);if(Array.isArray(this.data.actions)&&this.data.actions.length>0){const e=this.context.helpers.u(`<div class="guided-tour-step-actions">\n                    ${this.data.actions.map(((t,e)=>`<${t.href?"a":"button"} ${function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map((e=>`${e}="${t[e]}"`)).join(" ")}(t.attributes)} class="button${t.primary?" primary":""}" data-index="${e}">${t.label}</${t.href?"a":"button"}>`)).join("")}\n                </div>`);e.find("a, button").on("click",(t=>{const e=this.data.actions[parseInt((t?.target).dataset.index)];e.action&&t.preventDefault(),this.context.action(t,e)})),t.append(e)}return t}get _footer(){return this.context.helpers.u(`<div class="guided-tour-step-bullets">\n                <ul>${this.context.steps.map(((t,e)=>`<li>\n                    <button title="Go to step ${e+1}" data-index="${e}" class="${t.index<this.index?"complete":t.index==this.index?"current":""}"></button>\n                    </li>`)).join("")}</ul>\n            </div>`)}get _navigation(){const t=this.context.helpers.u('<div class="guided-tour-step-footer"></div>');return this.data.navigation&&t.append(this.context.helpers.u(`<button class="guided-tour-step-button guided-tour-step-button-close" title="End tour">\n                        <svg class="guided-tour-icon" viewBox="0 0 20 20" width="16" height="16"><g fill="none" stroke="currentColor" stroke-width="2"><path d="M16,16 L4,4"></path><path d="M16,4 L4,16"></path></g></svg>\n                    </button>\n                    ${this.first?"":'<button class="guided-tour-step-button guided-tour-step-button-prev" title="Prev step">\n                      <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                      <polyline points="12 4 6 10 12 16" fill="none" stroke="currentColor" stroke-width="1"></polyline>\n                      </svg>\n                    </button>'}\n                    ${this.last?'<button class="guided-tour-step-button guided-tour-step-button-complete" title="Complete tour">\n                      <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                      <polyline points="4,10 8,15 17,4" fill="none" stroke="currentColor" stroke-width="1"></polyline>\n                      </svg>\n                    </button>':'<button class="guided-tour-step-button guided-tour-step-button-next" title="Next step">\n                      <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                      <polyline points="7 4 13 10 7 16" fill="none" stroke="currentColor" stroke-width="1"></polyline>\n                      </svg>\n                    </button>'}`)),this.context.steps.length>1&&t.append(this._footer),t.find(".guided-tour-step-button-prev").on("click",this.context.previous),t.find(".guided-tour-step-button-next").on("click",this.context.next),t.find(".guided-tour-step-button-close").on("click",this.context.stop),t.find(".guided-tour-step-button-complete").on("click",this.context.complete),t.find(".guided-tour-step-bullets button").on("click",(t=>this.context.go(parseInt(this.context.helpers.u(t.target).data("index"))))),t}get _container(){return this.context.helpers.u(`<div role="dialog" aria-labelleby="tooltip-title-${this.data.index}" class="guided-tour-step${this.first?" guided-tour-step-first":""}${this.last?" guided-tour-step-last":""}"><div class="guided-tour-step-clickblock"></div></div>`)}get _highlight(){return this.$highlight=this.context.helpers.u('<div class="guided-tour-step-highlight"></div>')}get _el(){if(!this.$container){const t=this.$tooltip=this.context.helpers.u('<div role="document" class="guided-tour-step-tooltip"></div>');this.data.width&&this.context.helpers.Style.setStyle(t,{width:this.data.width,maxWidth:this.data.width}),this.data.height&&this.context.helpers.Style.setStyle(t,{height:this.data.height,maxHeight:this.data.height});const e=this.context.helpers.u(`<div class="guided-tour-step-tooltip-inner${"horizontal"===this.data.layout?" step-layout-horizontal":""}"></div>`),o=this.context.helpers.u('<div class="guided-tour-step-content-container"></div>');o.append(this._image).append(this._content);const n=this.$arrow=this.context.helpers.u('<div class="guided-tour-arrow"></div>'),i=this._navigation;e.append(n).append(o).append(i),t.append(e),this.$container=this._container,this.$container.append(this._highlight).append(t)}return this.$container}constructor(t,e){if(super(Object.assign({},gt,t),e),this._validate(this.data),this._decorate(this.data),this.data.layout=t.layout,t.image&&e.options.preloadimages&&!/^data:/i.test(t.image)){const e=new Image;e.onerror=()=>{console.error(new Error(`Invalid image URL: ${t.image}`)),this.data.image=""},e.src=this.data.image}this.data.actions=[],t.actions&&(Array.isArray(t.actions)?this.data.actions=t.actions:console.error(new Error("actions must be array but got "+typeof t.actions)))}_validate(t){this.context.helpers.assert(Object.prototype.hasOwnProperty.call(t,"title"),"missing required step parameter: title\n"+JSON.stringify(t,null,2)+"\nsee this doc for more detail: https://github.com/LikaloLLC/tourguide.js#json-based-approach"),this.context.helpers.assert(Object.prototype.hasOwnProperty.call(t,"content"),"missing required step parameter: content\n"+JSON.stringify(t,null,2)+"\nsee this doc for more detail: https://github.com/LikaloLLC/tourguide.js#json-based-approach")}_decorate(t){t.title=this.context.helpers.decorate(t.title,this),t.content=this.context.helpers.decorate(t.content,this)}_cancel(){}_position(t){const e=t?.first();e?this.$arrow.removeClass("no-arrow "):this.$arrow.addClass("no-arrow "),this.context.helpers.Position.position(e||document.body,this.$tooltip?.first(),e?[this.context.helpers.Position.positionabsolute(),this.context.helpers.Position.autoPlacement({alignment:this.data.alignment,padding:24}),this.context.helpers.Position.highlight({element:this.$highlight?.first(),padding:5}),this.context.helpers.Position.offset,this.context.helpers.Position.arrow({element:this.$arrow?.first(),padding:18}),this.context.helpers.Position.keepinview({padding:24})]:[this.context.helpers.Position.positionfixed(),this.context.helpers.Position.highlight({element:this.$highlight?.first(),centered:!0})])}attach(t){this.context.helpers.u(t).append(this._el)}show(){if(this._cancel(),!this.active){super.show();const t=this.context.helpers.u(this.data.selector||"null");return this._position(t),this.context.helpers.Style.setStyle(this.$container,{opacity:1}),(this.$container?.find(".guided-tour-step-tooltip, button.button, button.primary, .guided-tour-step-button-complete, .guided-tour-step-button-next").last()).focus({preventScroll:!0}),this._el.addClass("active"),!0}return!1}hide(){return this._cancel(),!!this.active&&(this.context.helpers.Style.setStyle(this.$container,{opacity:0}),this._el.removeClass("active"),super.hide(),!0)}remove(){this.hide(),this._el.remove()}}function mt(t,e){return{name:t,onAction:e}}class yt{constructor(t,e){this.match="string"==typeof t&&t?new RegExp(`{s*${t.trim()}s*(,.+?)?s*?}`,"gmi"):t||!1,this.decoratorFn=e}test(t){return!this.match||this.match.test(t)}render(t,e,o){try{const n=this.match?function(t,e){const o=[];let n;for(e.lastIndex=0;null!==(n=e.exec(t));)n.index===e.lastIndex&&e.lastIndex++,o.push({match:n[0],start:n.index,length:n[0].length,properties:(i=n[1],(i||"").split(",").map((t=>t.trim())).filter(Boolean))});var i;return o}(t,this.match).reverse():[];return this.decoratorFn(t,n,e,o)}catch(e){return console.warn(e),t}}}const vt={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function bt(t){return t.replace(RegExp("^"+(t.match(/^(\t| )+/)||"")[0],"gm"),"")}function xt(t){return(t+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function wt(t,e){const o=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,n=[];let i="";const r=e||{};let s=0,a=null,u="",c=null,l="",d="";function p(t){const e=vt[t[1]||""],o=n[n.length-1]===t;return e?e[1]?(o?n.pop():n.push(t),e[0|o]):e[0]:t}function h(){let t="";for(;n.length>0;)t+=p(n[n.length-1]);return t}for(t=t.replace(/^\[(.+?)\]:\s*(.+)$/gm,((t,e,o)=>(r[e.toLowerCase()]=o,""))).replace(/^\n+|\n+$/g,"");c=o.exec(t);)u=t.substring(s,c.index),s=o.lastIndex,a=c[0],u.match(/[^\\](\\\\)*\\$/)||((d=c[3]||c[4])?a='<pre class="code '+(c[4]?"poetry":c[2].toLowerCase())+'"><code'+(c[2]?` class="language-${c[2].toLowerCase()}"`:"")+">"+bt(xt(d).replace(/^\n+|\n+$/g,""))+"</code></pre>":(d=c[6])?(d.match(/\./)&&(c[5]=c[5].replace(/^\d+/gm,"")),l=wt(bt(c[5].replace(/^\s*[>*+.-]/gm,""))),">"==d?d="blockquote":(d=d.match(/\./)?"ol":"ul",l=l.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),a="<"+d+">"+l+"</"+d+">"):c[8]?a=`<img src="${xt(c[8])}" alt="${xt(c[7])}">`:c[10]?(i=i.replace("<a>",`<a href="${xt(c[11]||r[u.toLowerCase()])}" target="_blank">`),a=h()+"</a>"):c[9]?a="<a>":c[12]||c[14]?(d="h"+(c[14]?c[14].length:c[13]>"="?1:2),a="<"+d+">"+wt(c[12]||c[15],r)+"</"+d+">"):c[16]?a="<code>"+xt(c[16])+"</code>":(c[17]||c[1])&&(a=p(c[17]||"--"))),i+=u,i+=a;return(i+t.substring(s)+h()).replace(/^\n+|\n+$/g,"")}const _t=new yt("",(t=>wt(t)));const kt={next:"ArrowRight",prev:"ArrowLeft",first:"Home",last:"End",complete:null,stop:"Escape"},Ct={fontFamily:"sans-serif",fontSize:"14px",overlayColor:"rgb(0 100 255 / 25%)",textColor:"#333",accentColor:"#0d6efd",backgroundColor:"#fff",focusColor:"auto",tooltipWidth:"40vw",bulletColor:"auto",bulletVisitedColor:"auto",bulletCurrentColor:"auto",stepButtonCloseColor:"auto",stepButtonPrevColor:"auto",stepButtonNextColor:"auto",stepButtonCompleteColor:"auto",stepCardPadding:"5px"},St={identifier:"default",root:"body",selector:"[data-tour]",restoreinitialposition:!0,preloadimages:!0,resumeOnLoad:!0,request:{options:{mode:"cors",cache:"no-cache"},headers:{"Content-Type":"application/json"}},keyboardNavigation:kt,stepFactory:[ft,class extends ft{static Type="card";static Style="";get _container(){return this.context.helpers.u(`<div role="dialog" aria-labelleby="tooltip-title-${this.data.index}" class="guided-tour-step${this.first?" guided-tour-step-first":""}${this.last?" guided-tour-step-last":""}"></div>`)}get _highlight(){return this.context.helpers.u("<span></span>")}get _footer(){return this.context.helpers.u("<span></span>")}_position(){this.context.helpers.Position.position(document.body,this.$tooltip?.first(),[this.context.helpers.Position.positionfixed({placement:this.data.placement,padding:25})])}attach(t){super.attach(t),this.$arrow&&this.$arrow.addClass("no-arrow ")}}],actionHandlers:[],contentDecorators:[_t],cacheManagerFactory:class extends i{_memory={};get(t){return this._memory[t]}set(t,e){return this._memory[t]=e}clear(t){this._memory[t]=void 0}},steps:[],src:"",style:Ct};function $t(t,e){return t.code===e}class Et{static DefaultKeyNavOptions=(()=>kt)();static DefaultTourStyles=(()=>Ct)();static DefaultTourOptions=(()=>St)();static ActionHandler=(()=>mt)();static ContentDecorator=(()=>yt)();static Abstracts=(()=>ht)();static Helpers=(()=>({u:n,...dt}))();_steps=[];_current=0;_active=!1;_ready=!1;_complete=!1;_stepsSrc=(()=>e.StepsSource.DOM)();_initialposition=null;get cacheManager(){return this._cacheManager||(this._cacheManager=new this.options.cacheManagerFactory(this.options.identifier))}get currentstep(){return this._steps[this._current]}get length(){return this._steps.length}get steps(){return this._steps.filter((t=>!t.data.hidden))}get hasnext(){return this.nextstep!==this._current}get nextstep(){return s(this._current+1,0,this.length-1)}get previousstep(){return s(this._current-1,0)}get options(){return this._options}get helpers(){return this._helpers||(this._helpers={...Et.Helpers,decorate:this._decorateText.bind(this)})}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(this._options=Object.assign({},St,t,{style:a.setAutoColors(Ct,t.style||{})}),n(this._options.root).append(this._containerElement=n(document.createElement("div")).addClass("__guided-tour-container")),this._shadowRoot=this._containerElement.first().attachShadow({mode:"closed"}),this._injectStyles(),this.start=this.start.bind(this),this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.go=this.go.bind(this),this.stop=this.stop.bind(this),this.complete=this.complete.bind(this),this._keyboardHandler=this._keyboardHandler.bind(this),this.cacheManager.set(e.CacheKeys.LastInitilized,new Date),!0){case"string"==typeof this._options.src&&Boolean(this._options.src):this._stepsSrc=e.StepsSource.REMOTE,fetch(new Request(this._options.src,this._options.request)).then((t=>t.json().then((t=>{this._initSteps(t),this._ready=!0,this._onTourReady()})).catch((t=>console.error(t))))).catch((()=>{r(!1,"Failed to fetch step data. Check documentation.")}));break;case Array.isArray(this._options.steps)&&this._options.steps.length>0:this._stepsSrc=e.StepsSource.JSON,this._initSteps(this._options.steps),this._ready=!0,this._onTourReady();break;default:this._stepsSrc=e.StepsSource.DOM,this._ready=!0,this._onTourReady()}}_initSteps(t){this._steps=t.map((t=>{const e=t.type||"default",o=this._options.stepFactory?.find((t=>t.Type===e));return r(o,`No factory for step of type "${e}". Check your setup.`),new o({...t},this)})).sort(((t,e)=>t.data.index-e.data.index)),this._steps.forEach(((t,e)=>{t.index=e})),this._steps[0].first=!0,this._steps[this.length-1].last=!0}_onTourReady(){this._ready&&this.cacheManager.get(e.CacheKeys.IsStarted)&&this.options.resumeOnLoad&&(this._current=parseInt(this.cacheManager.get(e.CacheKeys.CurrentProgress)),isNaN(this._current)&&(this._current=0),this._triggerCustomEvent("resume"),this.start(this._current))}_injectStyles(){const t=n(`<style>:host {\n  position: absolute;\n  overflow: visible;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 0;\n  box-sizing: border-box;\n  line-height: 1.4;\n  text-align: left;\n  text-rendering: optimizespeed;\n  font-family: var(--tourguide-font-family);\n  font-size: var(--tourguide-font-size);\n  color: var(--tourguide-text-color);\n  /* 1 */\n  -webkit-text-size-adjust: 100%;\n  /* 2 */\n  -moz-tab-size: 4;\n  /* 3 */\n  tab-size: 4;\n  /* 3 */\n}\n:host * {\n  margin: 0;\n  padding: 0;\n  background: none;\n  border: none;\n  border-width: 0;\n  border-style: none;\n  border-color: currentColor;\n  box-shadow: none;\n  color: inherit;\n  appearance: none;\n  font-size: inherit;\n  font-weight: inherit;\n  text-decoration: none;\n}\n:host a,\n:host button {\n  cursor: pointer;\n}\n:host a:hover, :host a:focus,\n:host button:hover,\n:host button:focus {\n  outline: 5px auto var(--tourguide-focus-color);\n}</style>${this.options.stepFactory.map((t=>t.Style)).filter(Boolean).map((t=>`<style>${t}</style`)).join("")}`);n(this._shadowRoot).append(t);const e=n(`<style>${u.colorObjToStyleVarString(this._options.style||{},"--tourguide")}</style>`);n(this._shadowRoot).append(e)}_keyboardHandler(t){return this._options.keyboardNavigation?.next&&$t(t,this._options.keyboardNavigation.next)?this.next():this._options.keyboardNavigation?.prev&&$t(t,this._options.keyboardNavigation.prev)?this.previous():this._options.keyboardNavigation?.first&&$t(t,this._options.keyboardNavigation.first)?this.go(0):this._options.keyboardNavigation?.last&&$t(t,this._options.keyboardNavigation.last)?this.go(this._steps.length-1):this._options.keyboardNavigation?.stop&&$t(t,this._options.keyboardNavigation.stop)?this.stop():this._options.keyboardNavigation?.complete&&$t(t,this._options.keyboardNavigation.complete)&&this.complete(),!0}_decorateText(t,e){let o=t;return this._options.contentDecorators?.forEach((t=>{t.test(o)&&(o=t.render(o,e,this))})),o}_triggerCustomEvent(t){const e=new CustomEvent(t,{bubbles:!1,cancelable:!1,composed:!1,detail:arguments.length>1&&void 0!==arguments[1]?arguments[1]:this});this._containerElement.first().dispatchEvent(e)}reset(){this._active&&this.stop(),this._complete=!1,this._current=0,this.cacheManager.set(e.CacheKeys.IsStarted,!0)}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._ready?(this._complete=!1,this._stepsSrc===e.StepsSource.DOM&&(this._initSteps(n(this._options.selector).nodes.map((t=>{const e=function(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(";"),o={...t};return e.forEach((t=>{const e=(t||"").split(":");e[0]?o[(e[0]||"").trim()]=(e[1]||"").trim():console.warn("Invalid key-value pair found in data string:",t)})),o}(n(t).data("tour"));return e.selector=t,e}))),r(this._steps.length>0,"Found no tour steps on page. Please verify your setup.")),u.setStyle(this._containerElement,{"z-index":l()+1}),this._options.restoreinitialposition&&(this._initialposition=d.getScrollCoordinates(this._options.root)),this._active?this.go(t):(this._triggerCustomEvent("start"),this.cacheManager.set(e.CacheKeys.IsStarted,!0),n(this._options.root).addClass("__guided-tour-active"),this.reset(),this._steps.forEach((t=>t.attach(this._shadowRoot))),this._current=NaN,this._active=!0,this.go(t),this._options.keyboardNavigation&&(r("[object Object]"===Object.prototype.toString.call(this._options.keyboardNavigation),"keyboardNavigation option invalid. should be predefined object or false. Check documentation."),n(":root").on("keyup",this._keyboardHandler)))):setTimeout((()=>{this.start(t)}),50)}action(t,e){if(this._active){switch(e.action){case"next":this.next();break;case"previous":this.previous();break;case"stop":this.stop();break;case"complete":this.complete();break;default:{const o=this._options.actionHandlers?.find((t=>t.name===e.action));o&&o.onAction(t,e,this)}}this._triggerCustomEvent("action",{action:e,context:this,trigger:t})}}next(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),this._active&&this.go(this.nextstep)}previous(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),this._active&&this.go(this.previousstep)}go(t){if(this._active&&this._current!==t){const o=this._current<t?e.Direction.FORWARD:e.Direction.BACKWARD;this.currentstep?.hide(),this._current=s(t,0,this.length-1),this.currentstep.data?.selector?d.smoothScroll(n(this.currentstep.data.selector).first(),{block:"center"}).then((()=>{this.currentstep.show(o)})):this.currentstep.show(o),this.cacheManager.set(e.CacheKeys.CurrentProgress,this._current),this._triggerCustomEvent("step")}}stop(){this._active&&(this.currentstep.hide(),u.setStyle(this._containerElement,{"z-index":0}),this._active=!1,this._steps.forEach((t=>t.remove(this._complete?e.TourStopState.COMPLETE:e.TourStopState.INCOMPLETE))),n(this._options.root).removeClass("__guided-tour-active"),this._options.keyboardNavigation&&n(":root").off("keyup",this._keyboardHandler),this._options.restoreinitialposition&&this._initialposition&&d.animateScroll(this._initialposition,120),this.cacheManager.set(e.CacheKeys.IsStarted,!1),this.cacheManager.clear(e.CacheKeys.CurrentProgress),this._triggerCustomEvent("stop"))}complete(){this._active&&(this._complete=!0,this.stop(),this._triggerCustomEvent("complete"))}remove(){this._ready&&(this._containerElement?.remove(),this._active=!1,this._ready=!1)}addEventListener(t,e){this._containerElement.on(t,e)}removeEventListener(t,e){this._containerElement.off(t,e)}}t.default=Et,t.defaultKeyNavOptions=kt,t.defaultOptions=St,t.defaultStyle=Ct,Object.defineProperty(t,"__esModule",{value:!0})}({},_types);
