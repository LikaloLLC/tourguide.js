var Tourguide=function(){var l=(function(t){function a(t,e){return this instanceof a?t instanceof a?t:((t="string"==typeof t?this.select(t,e):t)&&t.nodeName&&(t=[t]),void(this.nodes=this.slice(t))):new a(t,e)}(a.prototype={get length(){return this.nodes.length}}).nodes=[],a.prototype.addClass=function(){return this.eacharg(arguments,function(t,e){t.classList.add(e)})},a.prototype.adjacent=function(o,t,r){return"number"==typeof t&&(t=0===t?[]:new Array(t).join().split(",").map(Number.call,Number)),this.each(function(n,i){var e=document.createDocumentFragment();a(t||{}).map(function(t,e){return"string"==typeof(e="function"==typeof o?o.call(this,t,e,n,i):o)?this.generate(e):a(e)}).each(function(t){this.isInPage(t)?e.appendChild(a(t).clone().first()):e.appendChild(t)}),r.call(this,n,e)})},a.prototype.after=function(t,e){return this.adjacent(t,e,function(t,e){t.parentNode.insertBefore(e,t.nextSibling)})},a.prototype.append=function(t,e){return this.adjacent(t,e,function(t,e){t.appendChild(e)})},a.prototype.args=function(t,e,n){return(t="string"!=typeof(t="function"==typeof t?t(e,n):t)?this.slice(t).map(this.str(e,n)):t).toString().split(/[\s,]+/).filter(function(t){return t.length})},a.prototype.array=function(o){var r=this;return this.nodes.reduce(function(t,e,n){var i;return o?(i="string"==typeof(i=o.call(r,e,n)||!1)?a(i):i)instanceof a&&(i=i.nodes):i=e.innerHTML,t.concat(!1!==i?i:[])},[])},a.prototype.attr=function(t,e,i){return i=i?"data-":"",this.pairs(t,e,function(t,e){return t.getAttribute(i+e)},function(t,e,n){n?t.setAttribute(i+e,n):t.removeAttribute(i+e)})},a.prototype.before=function(t,e){return this.adjacent(t,e,function(t,e){t.parentNode.insertBefore(e,t)})},a.prototype.children=function(t){return this.map(function(t){return this.slice(t.children)}).filter(t)},a.prototype.clone=function(){return this.map(function(t,e){var n=t.cloneNode(!0),i=this.getAll(n);return this.getAll(t).each(function(t,e){for(var n in this.mirror)this.mirror[n]&&this.mirror[n](t,i.nodes[e])}),n})},a.prototype.getAll=function(t){return a([t].concat(a("*",t).nodes))},(a.prototype.mirror={}).events=function(t,e){if(t._e)for(var n in t._e)t._e[n].forEach(function(t){a(e).on(n,t.callback)})},a.prototype.mirror.select=function(t,e){a(t).is("select")&&(e.value=t.value)},a.prototype.mirror.textarea=function(t,e){a(t).is("textarea")&&(e.value=t.value)},a.prototype.closest=function(e){return this.map(function(t){do{if(a(t).is(e))return t}while((t=t.parentNode)&&t!==document)})},a.prototype.data=function(t,e){return this.attr(t,e,!0)},a.prototype.each=function(t){return this.nodes.forEach(t.bind(this)),this},a.prototype.eacharg=function(n,i){return this.each(function(e,t){this.args(n,e,t).forEach(function(t){i.call(this,e,t)},this)})},a.prototype.empty=function(){return this.each(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})},a.prototype.filter=function(e){return a(this.nodes.filter(e instanceof a?function(t){return-1!==e.nodes.indexOf(t)}:"function"==typeof e?e:function(t){return t.matches=t.matches||t.msMatchesSelector||t.webkitMatchesSelector,t.matches(e||"*")}))},a.prototype.find=function(e){return this.map(function(t){return a(e||"*",t)})},a.prototype.first=function(){return this.nodes[0]||!1},a.prototype.generate=function(t){return/^\s*<tr[> ]/.test(t)?a(document.createElement("table")).html(t).children().children().nodes:/^\s*<t(h|d)[> ]/.test(t)?a(document.createElement("table")).html(t).children().children().children().nodes:/^\s*</.test(t)?a(document.createElement("div")).html(t).children().nodes:document.createTextNode(t)},a.prototype.handle=function(){var t=this.slice(arguments).map(function(e){return"function"==typeof e?function(t){t.preventDefault(),e.apply(this,arguments)}:e},this);return this.on.apply(this,t)},a.prototype.hasClass=function(){return this.is("."+this.args(arguments).join("."))},a.prototype.html=function(e){return void 0===e?this.first().innerHTML||"":this.each(function(t){t.innerHTML=e})},a.prototype.is=function(t){return 0<this.filter(t).length},a.prototype.isInPage=function(t){return t!==document.body&&document.body.contains(t)},a.prototype.last=function(){return this.nodes[this.length-1]||!1},a.prototype.map=function(t){return t?a(this.array(t)).unique():this},a.prototype.not=function(e){return this.filter(function(t){return!a(t).is(e||!0)})},a.prototype.off=function(t,e,n){var i=null==e&&null==n,o=null,r=e;return"string"==typeof e&&(o=e,r=n),this.eacharg(t,function(e,n){a(e._e?e._e[n]:[]).each(function(t){(i||t.orig_callback===r&&t.selector===o)&&e.removeEventListener(n,t.callback)})})},a.prototype.on=function(t,e,o){function r(t,e){try{Object.defineProperty(t,"currentTarget",{value:e,configurable:!0})}catch(t){}}var s=null,n=e;function i(t){return e.apply(this,[t].concat(t.detail||[]))}return"string"==typeof e&&(s=e,n=o,e=function(n){var i=arguments;a(n.currentTarget).find(s).each(function(t){var e;t.contains(n.target)&&(e=n.currentTarget,r(n,t),o.apply(t,i),r(n,e))})}),this.eacharg(t,function(t,e){t.addEventListener(e,i),t._e=t._e||{},t._e[e]=t._e[e]||[],t._e[e].push({callback:i,orig_callback:n,selector:s})})},a.prototype.pairs=function(i,t,e,o){var n;return void 0!==t&&(n=i,(i={})[n]=t),"object"==typeof i?this.each(function(t,e){for(var n in i)"function"==typeof i[n]?o(t,n,i[n](t,e)):o(t,n,i[n])}):this.length?e(this.first(),i):""},a.prototype.param=function(e){return Object.keys(e).map(function(t){return this.uri(t)+"="+this.uri(e[t])}.bind(this)).join("&")},a.prototype.parent=function(t){return this.map(function(t){return t.parentNode}).filter(t)},a.prototype.prepend=function(t,e){return this.adjacent(t,e,function(t,e){t.insertBefore(e,t.firstChild)})},a.prototype.remove=function(){return this.each(function(t){t.parentNode&&t.parentNode.removeChild(t)})},a.prototype.removeClass=function(){return this.eacharg(arguments,function(t,e){t.classList.remove(e)})},a.prototype.replace=function(t,e){var n=[];return this.adjacent(t,e,function(t,e){n=n.concat(this.slice(e.children)),t.parentNode.replaceChild(e,t)}),a(n)},a.prototype.scroll=function(){return this.first().scrollIntoView({behavior:"smooth"}),this},a.prototype.select=function(t,e){return t=t.replace(/^\s*/,"").replace(/\s*$/,""),/^</.test(t)?a().generate(t):(e||document).querySelectorAll(t)},a.prototype.serialize=function(){var i=this;return this.slice(this.first().elements).reduce(function(e,n){return!n.name||n.disabled||"file"===n.type||/(checkbox|radio)/.test(n.type)&&!n.checked?e:"select-multiple"===n.type?(a(n.options).each(function(t){t.selected&&(e+="&"+i.uri(n.name)+"="+i.uri(t.value))}),e):e+"&"+i.uri(n.name)+"="+i.uri(n.value)},"").slice(1)},a.prototype.siblings=function(t){return this.parent().children(t).not(this)},a.prototype.size=function(){return this.first().getBoundingClientRect()},a.prototype.slice=function(t){return t&&0!==t.length&&"string"!=typeof t&&"[object Function]"!==t.toString()?t.length?[].slice.call(t.nodes||t):[t]:[]},a.prototype.str=function(e,n){return function(t){return"function"==typeof t?t.call(this,e,n):t.toString()}},a.prototype.text=function(e){return void 0===e?this.first().textContent||"":this.each(function(t){t.textContent=e})},a.prototype.toggleClass=function(t,e){return!!e===e?this[e?"addClass":"removeClass"](t):this.eacharg(t,function(t,e){t.classList.toggle(e)})},a.prototype.trigger=function(t){var o=this.slice(arguments).slice(1);return this.eacharg(t,function(t,e){var n,i={bubbles:!0,cancelable:!0,detail:o};try{n=new window.CustomEvent(e,i)}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,o)}t.dispatchEvent(n)})},a.prototype.unique=function(){return a(this.nodes.reduce(function(t,e){return null!=e&&!1!==e&&-1===t.indexOf(e)?t.concat(e):t},[]))},a.prototype.uri=function(t){return encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},a.prototype.wrap=function(t){return this.map(function(e){return a(t).each(function(t){!function(t){for(;t.firstElementChild;)t=t.firstElementChild;return a(t)}(t).append(e.cloneNode(!0)),e.parentNode.replaceChild(t,e)})})},t.exports&&(t.exports=a,t.exports.u=a)}(t={exports:{}}),t.exports),m=(l.u,"complete"),h="canceled";function y(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function b(t){var e=t._scrollSettings;if(e){var n,i,o,r,s,a,c,l,u,h,p,d=e.maxSynchronousAlignments,f=(v=t,s=(n=e).align,a=n.target.getBoundingClientRect(),c=s&&null!=s.left?s.left:.5,l=s&&null!=s.top?s.top:.5,u=s&&null!=s.leftOffset?s.leftOffset:0,h=s&&null!=s.topOffset?s.topOffset:0,p=c,s=l,v=n.isWindow(v)?(i=Math.min(a.width,v.innerWidth),o=Math.min(a.height,v.innerHeight),r=a.left+v.pageXOffset-v.innerWidth*p+i*p,f=a.top+v.pageYOffset-v.innerHeight*s+o*s,r-=u,f-=h,r=n.align.lockX?v.pageXOffset:r,f=n.align.lockY?v.pageYOffset:f,g=r-v.pageXOffset,f-v.pageYOffset):(i=a.width,o=a.height,c=v.getBoundingClientRect(),l=a.left-(c.left-v.scrollLeft),c=a.top-(c.top-v.scrollTop),r=l+i*p-v.clientWidth*p,f=c+o*s-v.clientHeight*s,r-=u,f-=h,r=Math.max(Math.min(r,v.scrollWidth-v.clientWidth),0),f=Math.max(Math.min(f,v.scrollHeight-v.clientHeight),0),r=n.align.lockX?v.scrollLeft:r,f=n.align.lockY?v.scrollTop:f,g=r-v.scrollLeft,f-v.scrollTop),{x:r,y:f,differenceX:g,differenceY:v}),g=Date.now()-e.startTime,v=Math.min(1/e.time*g,1);if(e.endIterations>=d)return y(t,f.x,f.y),t._scrollSettings=null,e.end(m);v=1-e.ease(v);if(y(t,f.x-f.differenceX*v,f.y-f.differenceY*v),g>=e.time)return e.endIterations++,e.scrollAncestor&&b(e.scrollAncestor),void b(t);!function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(b.bind(null,t))}}function p(t){return t.self===t}function u(t){return"pageXOffset"in t||(t.scrollHeight!==t.clientHeight||t.scrollWidth!==t.clientWidth)&&"hidden"!==getComputedStyle(t).overflow}function d(){return!0}function f(t){if(t.assignedSlot)return f(t.assignedSlot);if(t.parentElement)return"BODY"===t.parentElement.tagName?t.parentElement.ownerDocument.defaultView||t.parentElement.ownerDocument.ownerWindow:t.parentElement;if(t.getRootNode){t=t.getRootNode();if(11===t.nodeType)return t.host}}function n(i,o,e){if(i){"function"==typeof o&&(e=o,o=null),(o=o||{}).time=isNaN(o.time)?1e3:o.time,o.ease=o.ease||function(t){return 1-Math.pow(1-t,t/2)},o.align=o.align||{};var t=f(i),n=1,r=o.validTarget||d,s=o.isScrollable;o.debug&&(console.log("About to scroll to",i),t||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var a=[];t;)if(o.debug&&console.log("Scrolling parent node",t),r(t,n)&&(s?s(t,u):u(t))&&(n++,a.push(t)),!(t=f(t))){c(m);break}return a.reduce((t,e,n)=>function(t,e,n,i,o){var r,s=!e._scrollSettings,a=e._scrollSettings,c=Date.now(),l={passive:!0};function u(t){e._scrollSettings=null,e.parentElement&&e.parentElement._scrollSettings&&e.parentElement._scrollSettings.end(t),n.debug&&console.log("Scrolling ended with type",t,"for",e),o(t),r&&(e.removeEventListener("touchstart",r,l),e.removeEventListener("wheel",r,l))}return a&&a.end(h),a=n.maxSynchronousAlignments,e._scrollSettings={startTime:c,endIterations:0,target:t,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||p,maxSynchronousAlignments:a=null==a?3:a,end:u,scrollAncestor:i},"cancellable"in n&&!n.cancellable||(r=u.bind(null,h),e.addEventListener("touchstart",r,l),e.addEventListener("wheel",r,l)),s&&b(e),r}(i,e,o,a[n+1],c),null)}function c(t){--n||e&&e(t)}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function v(t,e,n){return e=isNaN(e)?t:e,n=isNaN(n)?t:n,Math.max(e,Math.min(t,n))}function w(t,e){var n=1<arguments.length&&void 0!==e?e:"float";if("number"==typeof t)return t;var i=0;try{i="int"===n?Number.parseInt(t):Number.parseFloat(t)}catch(t){i=0}return Number.isNaN(i)?0:i}function _(t){return t&&null!==t.offsetParent}function k(t,e){t=l(t).size(),e=x(e);return{width:t.width,height:t.height,top:t.top+e.scrollY-e.rootTop,bottom:t.bottom+e.scrollY-e.rootTop,left:t.left+e.scrollX-e.rootLeft,right:t.right+e.scrollX-e.rootLeft,viewTop:t.top,viewBottom:t.bottom,viewLeft:t.left,viewRight:t.right}}function x(e){try{var t=l(e).first(),n=l(e).size();return{width:window.innerWidth,height:window.innerHeight,scrollX:t.scrollLeft,scrollY:t.scrollTop,rootWidth:n.width,rootHeight:n.height,rootTop:n.top,rootLeft:n.left}}catch(t){throw console.error(t),Error("element is invalid: "+e)}}function C(t,e){t=l(t).first();if(window.getComputedStyle)try{return getComputedStyle(t).getPropertyValue(e)}catch(t){return""}else if(t.currentStyle)try{return t.currentStyle[e]}catch(t){return""}return""}var s=["top","left","right","bottom","width","height","maxWidth","minWidth","transform"];function S(t,e){var i;"[object Object]"!==!Object.prototype.toString.call(e)&&(i=l(t).first().style,Object.entries(e).filter(function(t){var e=a(t,2),t=e[0],e=e[1];return s.includes(t)&&("number"==typeof e||"string"==typeof e)}).forEach(function(t){var e=a(t,2),t=e[0],e=e[1],n="number"==typeof e?e+"px":e;switch(t){case"top":i.top=n;break;case"left":i.left=n;break;case"right":i.right=n;break;case"bottom":i.bottom=n;break;case"width":i.width=n;break;case"height":i.height=n;break;case"maxWidth":i.maxWidth=n;break;case"minWidth":i.minWidth=n;break;case"transform":i.transform=n}}))}function c(t,e,n){t.self===t?t.scrollTo(e,n):(t.scrollLeft=e,t.scrollTop=n)}function e(t,r){var s=Date.now();function a(t,e,n){var i,o;t?(i=Date.now()-s,o=Math.min(1/r*i,1),o=1-(1-Math.pow(1-o,o/2)),c(t,e-(e-t.scrollLeft)*o,n-(n-t.scrollTop)*o),r<=i?c(t,e,n):function(t){if("requestAnimationFrame"in window)return window.requestAnimationFrame(t);setTimeout(t,16)}(a.bind(null,t,e,n))):console.warn("target element "+t+" not found, skip")}t.forEach(function(t){a(t.element,t.x,t.y)})}var N={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function j(t){return t.replace(RegExp("^"+(t.match(/^(\t| )+/)||"")[0],"gm"),"")}function E(t){return(t+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function T(t){var e="";return"string"==typeof t?e=t:"object"===(void 0===t?"undefined":r(t))&&(e=t.type),e}var O=(t(L,[{key:"el",get:function(){var t,e,n,i,o,r,s,a,c=this;return this.container||(t=l('<div role="figure" class="guided-tour-step-image">'+(this.image?'<img src="'+this.image+'" />':"")+"</div>"),e=l('<div role="heading" class="guided-tour-step-title">'+this.title+"</div>"),n=l('<div class="guided-tour-step-content">'+this.content+"</div>"),(i=l('<div class="guided-tour-step-footer">\n                <span role="button" class="guided-tour-step-button guided-tour-step-button-close" title="End tour">\n                    <svg class="guided-tour-icon" viewBox="0 0 20 20" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-close"></use></svg>\n                </span>\n                '+(this.first?"":'<span role="button" class="guided-tour-step-button guided-tour-step-button-prev" title="Prev step">\n                  <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-prev"></use>\n                  </svg>\n                </span>')+"\n                "+(this.last?'<span role="button" class="guided-tour-step-button guided-tour-step-button-complete" title="Complete tour">\n                  <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-complete"></use>\n                  </svg>\n                </span>':!this.blocking&&'<span role="button" class="guided-tour-step-button guided-tour-step-button-next" title="Next step">\n                  <svg class="guided-tour-icon" viewBox="0 0 20 20" width="32" height="32">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tour-icon-next"></use>\n                  </svg>\n                </span>')+"\n                "+(1<this.context._steps.length?'<div class="guided-tour-step-bullets">\n                    <ul>'+this.context._steps.map(function(t,e){return'<li  title="Go to step '+(e+1)+'" data-index="'+e+'" class="'+(t.index<c.index?"complete":t.index==c.index?"current":"")+'"></li>'}).join("")+"</ul>\n                </div>":"")+"\n            </div>")).find(".guided-tour-step-button-prev").on("click",this.context.previous),i.find(".guided-tour-step-button-next").on("click",this.context.next),i.find(".guided-tour-step-button-close").on("click",this.context.stop),i.find(".guided-tour-step-button-complete").on("click",this.context.complete),i.find(".guided-tour-step-bullets li").on("click",function(t){return c.context.go(parseInt(l(t.target).data("index")))}),o=this.highlight=l('<div class="guided-tour-step-highlight"></div>'),r=this.tooltip=l('<div role="tooltip" class="guided-tour-step-tooltip"></div>'),s=l('<div class="guided-tour-step-tooltip-inner"></div>'),a=this.arrow=l('<div aria-hidden="true" class="guided-tour-arrow"><div aria-hidden="true" class="guided-tour-arrow-inner"></div></div>'),s.append(a).append(t).append(e).append(n).append(i),r.append(s),this.container=l('<div role="dialog" class="guided-tour-step'+(this.first?" guided-tour-step-first":"")+(this.last?" guided-tour-step-last":"")+'"></div>'),this.container.append(o).append(r)),this.container}},{key:"target",get:function(){return this._target||this._selector&&l(this._selector).first()},set:function(t){this._target=t}}]),t(L,[{key:"attach",value:function(t){l(t).append(this.el)}},{key:"remove",value:function(){this.hide(),this.el.remove()}},{key:"position",value:function(){var t,e,n,i,o,r,s,a,c,l,u,h,p=x(this.context._options.root);_(this.target)?(t=this.highlight,u=this.tooltip,l=this.arrow,a={},c={},h={},e=k(this.target,this.context._options.root),n=k(u,this.context._options.root),a.top=e.top-this.context.options.padding,a.left=e.left-this.context.options.padding,a.width=e.width+2*this.context.options.padding,a.height=e.height+2*this.context.options.padding,s=w(C(u,"margin-top"))+w(C(u,"margin-bottom")),i=w(C(u,"margin-left"))+w(C(u,"margin-right")),r=o=0,r=p.height-e.viewBottom>n.height+s||e.viewTop<n.height+s?(c.top=e.top+e.height,c.bottom="unset",u.addClass("guided-tour-arrow-top"),o=w(C(u,"border-top-left-radius")),w(C(u,"border-top-right-radius"))):(c.bottom=p.rootHeight-e.top,c.top="unset",u.addClass("guided-tour-arrow-bottom"),o=w(C(u,"border-bottom-left-radius")),w(C(u,"border-bottom-right-radius"))),s=k(l,this.context._options.root),p.width-e.left>n.width+i||e.right<n.width+i?(c.left=e.left,c.right="unset",e.width/2>n.width?h.right=8:h.left=v(e.width/2,o+2,n.width-s.width-r-2)):(c.right=p.rootWidth-e.right,c.left="unset",e.width/2>n.width?h.left=18:h.right=v(e.width/2,r+2,n.width-s.width-o-2)),S(t,a),S(u,c),S(l,h),u.first().style.opacity=.1):(a=this.highlight,l=k(c=this.tooltip,this.context._options.root),h={},(u={}).top=0,u.left=0,u.width=0,u.height=0,h.top=p.height/2+p.scrollY-p.rootTop-l.height/2,h.left=p.width/2+p.scrollX-p.rootLeft-l.width/2,h.bottom="unset",h.right="unset",c.addClass("guided-tour-arrow-none"),S(a,u),S(c,h),a.first().style.boxShadow="none",c.first().style.opacity=.1,this.context._overlay.show())}},{key:"adjust",value:function(){var t=x(this.context._options.root),e=this.tooltip,n=k(e,this.context._options.root),i={};n.viewTop<8?(i.top=8-n.viewTop+n.top,i.bottom="unset"):n.viewBottom+8>t.height&&(i.top="unset",i.bottom=t.rootHeight-(n.bottom-(n.viewBottom+8-t.height))),n.viewLeft<32?(i.left=32-n.viewLeft+n.left,i.right="unset"):n.viewRight+32>t.width&&(i.left="unset",i.right=t.rootWidth-(n.right-(n.viewRight+32-t.width))),S(e,i),e.first().style.opacity=1}},{key:"cancel",value:function(){this._timerHandler&&clearTimeout(this._timerHandler),this._scrollCancel&&this._scrollCancel()}},{key:"show",value:function(){var t,i=this;if(this.cancel(),this.active)return!1;function e(){i.el.addClass("active"),i.context._overlay.hide(),i.position(),i.adjust(),i.actions.forEach(function(n){try{var t=T(n.event);t?(n.handler=function(e){var t;n&&!("object"===(void 0===(t=n.event)?"undefined":r(t))?Object.entries(t).map(function(t){t=a(t,2);return{key:t[0],value:t[1]}}):[]).filter(function(t){return e[t.key]!==t.value}).length&&i.context.action(e,n)},n.target=i.highlight,l(n.target).on(t,n.handler)):console.warn("Wrong event on action.event: "+n.event+" on step #"+i.index)}catch(t){console.warn("Could not find action.target: "+n.target+" on step #"+i.index),console.warn(t)}}),i.active=!0}return _(this.target)?this._scrollCancel=n(this.target,{time:this.context.options.animationspeed,cancellable:!1,align:{top:"top"===(t=this.context.options.align)?.1:"bottom"===t?.9:"center"===t?.5:0,left:.5}},e):this._timerHandler=setTimeout(e,this.context.options.animationspeed),!0}},{key:"hide",value:function(){return this.cancel(),!!this.active&&(_(this.target)&&l(this.target).removeClass("guided-tour-target"),this.el.removeClass("active"),this.tooltip.removeClass("guided-tour-arrow-top"),this.tooltip.removeClass("guided-tour-arrow-bottom"),this.context._overlay.show(),this.actions.forEach(function(t){try{var e=T(t.event);e&&l(t.target).off(e,t.handler)}catch(t){console.warn(t)}}),!(this.active=!1))}},{key:"toJSON",value:function(){return{index:this.index,title:this.title,content:this.content,image:this.image,active:this.active}}}]),L);function L(t,e){var n=this;o(this,L),this.index=0,this.image=null,this.title="",this.content="",this.active=!1,this.first=!1,this.last=!1,this.blocking=!1,this.awaitel=!1,this.container=null,this.highlight=null,this.tooltip=null,this.arrow=null,this.context=e,this._target=null,this._timerHandler=null,this._scrollCancel=null;var i=void 0;if(t instanceof HTMLElement)this.target=t,i=function(t,e){var n=0<arguments.length&&void 0!==t?t:"",i=1<arguments.length&&void 0!==e?e:{},n=n.split(";"),o=g({},i);return n.forEach(function(t){t=(t||"").split(":");o[(t[0]||"").trim()]=(t[1]||"").trim()}),o}(l(t).data("tour"));else{if(!(t.hasOwnProperty("title")&&t.hasOwnProperty("content")&&t.hasOwnProperty("step")))throw new Error("invalid step parameter:\n"+JSON.stringify(t,null,2)+"\nsee this doc for more detail: https://github.com/LikaloLLC/tourguide.js#json-based-approach");i=t,this._selector=t.selector}this.index=parseInt(i.step),this.title=i.title,this.content=function t(e,n){var i,o,r,s,a,c=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,l=[],u="",h=n||{},p=0;function d(t){var e=N[t[1]||""],n=l[l.length-1]==t;return e?e[1]?(n?l.pop():l.push(t),e[0|n]):e[0]:t}function f(){for(var t="";l.length;)t+=d(l[l.length-1]);return t}for(e=e.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(t,e,n){return h[e.toLowerCase()]=n,""}).replace(/^\n+|\n+$/g,"");r=c.exec(e);)o=e.substring(p,r.index),p=c.lastIndex,i=r[0],o.match(/[^\\](\\\\)*\\$/)||((a=r[3]||r[4])?i='<pre class="code '+(r[4]?"poetry":r[2].toLowerCase())+'"><code'+(r[2]?' class="language-'+r[2].toLowerCase()+'"':"")+">"+j(E(a).replace(/^\n+|\n+$/g,""))+"</code></pre>":(a=r[6])?(a.match(/\./)&&(r[5]=r[5].replace(/^\d+/gm,"")),s=t(j(r[5].replace(/^\s*[>*+.-]/gm,""))),">"==a?a="blockquote":(a=a.match(/\./)?"ol":"ul",s=s.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),i="<"+a+">"+s+"</"+a+">"):r[8]?i='<img src="'+E(r[8])+'" alt="'+E(r[7])+'">':r[10]?(u=u.replace("<a>",'<a href="'+E(r[11]||h[o.toLowerCase()])+'">'),i=f()+"</a>"):r[9]?i="<a>":r[12]||r[14]?i="<"+(a="h"+(r[14]?r[14].length:"="<r[13]?1:2))+">"+t(r[12]||r[15],h)+"</"+a+">":r[16]?i="<code>"+E(r[16])+"</code>":(r[17]||r[1])&&(i=d(r[17]||"--"))),u+=o,u+=i;return(u+e.substring(p)+f()).replace(/^\n+|\n+$/g,"")}(i.content),this.image=i.image,this.blocking=i.blocking,this.awaitel=i.awaitel,i.image&&e.options.preloadimages&&!/^data:/i.test(i.image)&&((e=new Image).onerror=function(){console.error(new Error("image is not valid: "+i.image)),n.image=null},e.src=this.image),this.actions=[],i.actions&&(Array.isArray(i.actions)?this.actions=i.actions:console.error(new Error("actions must be array but got "+r(i.actions))))}var A=(t(H,[{key:"el",get:function(){return this.container||(this.container=l('<div role="dialog" class="guided-tour-overlay"></div>')),this.container}}]),t(H,[{key:"attach",value:function(t){l(t).append(this.el)}},{key:"remove",value:function(){this.hide(),this.el.remove()}},{key:"show",value:function(){return!this.active&&(this.el.addClass("active"),this.active=!0)}},{key:"hide",value:function(){return!!this.active&&(this.el.removeClass("active"),!(this.active=!1))}},{key:"toJSON",value:function(){return{active:this.active}}}]),H);function H(t){o(this,H),this.context=t,this.container=null,this.active=!1}var W=0,B=1,M=2;function I(e,t,n){var i=2<arguments.length&&void 0!==n?n:"keyup";if("object"===(void 0===e?"undefined":r(e))){var o={type:i};if("number"==typeof t)o.keyCode=t;else if("string"==typeof t)o.key=t;else{if("object"!==(void 0===t?"undefined":r(t)))throw new Error("keyboardNavigation option invalid. should be predefined object or false. Check documentation.");o=g({},t,{type:i})}return!Object.entries(o).map(function(t){t=a(t,2);return{key:t[0],value:t[1]}}).filter(function(t){return e[t.key]!==t.value}).length}}function q(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,q);if(this._options=Object.assign({root:"body",selector:"[data-tour]",animationspeed:300,padding:5,steps:null,src:null,restoreinitialposition:!0,preloadimages:!1,request:{options:{mode:"cors",cache:"no-cache"},headers:{"Content-Type":"application/json"}},align:"top",keyboardNavigation:{next:"ArrowRight",prev:"ArrowLeft",first:"Home",last:"End",complete:null,stop:"Escape"},onStart:function(){},onStop:function(){},onComplete:function(){},onStep:function(){},onAction:function(){}},t,{colors:Object.assign({overlay:"rgba(0, 0, 0, 0.5)",background:"#fff",bullet:"#9ca3af",bulletVisited:"#aaa",bulletCurrent:"#39464e",stepButtonPrev:"#6b7280",stepButtonNext:"#111827",stepButtonComplete:"#111827"},t.colors||{})}),this._overlay=null,this._steps=[],this._current=0,this._active=!1,this._stepsSrc=W,this._ready=!1,this._initialposition=null,this._injectIcons(),"object"===r(this._options.steps)&&Array.isArray(this._options.steps))this._stepsSrc=B,this._steps=this._options.steps.map(function(t){return new O(t,e)}),this._ready=!0;else if("string"==typeof this._options.src)this._stepsSrc=M,fetch(new Request(this._options.src,this._options.request)).then(function(t){return t.json().then(function(t){e._steps=t.map(function(t){return new O(t,e)}),e._ready=!0})});else{if(!(0<l(this._options.selector).length))throw new Error("Tour is not configured properly. Check documentation.");this._stepsSrc=W,this._ready=!0}this.start=this.start.bind(this),this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.go=this.go.bind(this),this.stop=this.stop.bind(this),this.complete=this.complete.bind(this),this.action=this.action.bind(this),this._keyboardHandler=this._keyboardHandler.bind(this)}return t(q,[{key:"currentstep",get:function(){return this._steps[this._current]}},{key:"length",get:function(){return this._steps.length}},{key:"steps",get:function(){return this._steps.map(function(t){return t.toJSON()})}},{key:"hasnext",get:function(){return this.nextstep!==this._current}},{key:"nextstep",get:function(){return v(this._current+1,0,this.length-1)}},{key:"previousstep",get:function(){return v(this._current-1,0)}},{key:"options",get:function(){return this._options}}]),t(q,[{key:"_injectIcons",value:function(){0===l("#GuidedTourIconSet").length&&l("body").append(l('<svg id="GuidedTourIconSet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: none;">\n<symbol id="tour-icon-close" viewBox="0 0 20 20"><path d="M16,16 L4,4" fill="none" stroke="currentColor" stroke-width="1"></path><path d="M16,4 L4,16" fill="none" stroke="currentColor" stroke-width="1"></path></symbol>\n<symbol id="tour-icon-next" viewBox="0 0 20 20"><polyline points="7 4 13 10 7 16" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>\n<symbol id="tour-icon-prev" viewBox="0 0 20 20"><polyline points="12 4 6 10 12 16" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>\n<symbol id="tour-icon-complete" viewBox="0 0 20 20"><polyline points="4,10 8,15 17,4" fill="none" stroke="currentColor" stroke-width="1"></polyline></symbol>\n</svg>'))}},{key:"_injectStyles",value:function(){this._removeStyles(),console.log(this._options.colors);var t=l('<style id="tourguide-color-schema">'+function(t,e,n){var r=1<arguments.length&&void 0!==e?e:"--tourguide",i=2<arguments.length&&void 0!==n?n:":root",s=[];return Object.entries(t).forEach(function(t){for(var t=a(t,2),e=t[0],t=t[1],n=[r],i=0,o=0;o<e.length;o+=1)"A"<=e[o]&&e[o]<="Z"&&(n.push(e.substring(i,o).toLowerCase()),i=o);n.push(e.substring(i,e.length).toLowerCase()),s.push(n.join("-")+": "+t)}),i+" {\n"+s.join(";\n")+";\n}"}(this._options.colors,"--tourguide")+"</style>");l(":root > head").append(t)}},{key:"_removeStyles",value:function(){var t=l("style#tourguide-color-schema");0<t.length&&t.remove()}},{key:"_keyboardHandler",value:function(t){this._options.keyboardNavigation.next&&I(t,this._options.keyboardNavigation.next)?this.next():this._options.keyboardNavigation.prev&&I(t,this._options.keyboardNavigation.prev)?this.previous():this._options.keyboardNavigation.first&&I(t,this._options.keyboardNavigation.first)?this.go(0):this._options.keyboardNavigation.last&&I(t,this._options.keyboardNavigation.last)?this.go(this._steps.length-1):this._options.keyboardNavigation.stop&&I(t,this._options.keyboardNavigation.stop)?this.stop():this._options.keyboardNavigation.complete&&I(t,this._options.keyboardNavigation.complete)&&this.complete()}},{key:"init",value:function(){var t,e=this;this.reset(),l(this._options.root).addClass("guided-tour"),this._overlay=new A(this),this._stepsSrc===W&&(t=l(this._options.selector).nodes,this._steps=t.map(function(t){return new O(t,e)})),this._steps=this._steps.sort(function(t,e){return t.index-e.index}),this._steps[0].first=!0,this._steps[this.length-1].last=!0}},{key:"reset",value:function(){this._active&&this.stop(),this._stepsSrc===W&&(this._steps=[]),this._current=0}},{key:"start",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;if(this._ready){if(this._injectStyles(),this._options.restoreinitialposition&&(this._initialposition=function(t){var e=[],n=l(t);do{(n=n||!1).first()||(n=!1);try{var i=n.first();i.scrollHeight===i.height&&i.scrollWidth===i.width||e.push({element:n.first(),x:n.first().scrollLeft,y:n.first().scrollTop}),n=n.parent()}catch(t){n=!1}}while(n);return e}(this._options.root)),this._active)this.go(t,"start");else if(l(this._options.root).addClass("guided-tour"),this.init(),this._overlay.attach(this._options.root),this._steps.forEach(function(t){return t.attach(e._options.root)}),this._current=t,this.currentstep.show(),this._active=!0,this._options.onStart(this._options),this._options.keyboardNavigation){if("[object Object]"!==Object.prototype.toString.call(this._options.keyboardNavigation))throw new Error("keyboardNavigation option invalid. should be predefined object or false. Check documentation.");l(":root").on("keyup",this._keyboardHandler)}}else setTimeout(function(){e.start(t)},50)}},{key:"action",value:function(t,e){if(this._active)if(Array.isArray(e.act)){var n=!0,i=!1,o=void 0;try{for(var r,s=e.act[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var a=r.value,c=g({},e,{act:a});this.action(t,c)}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}else{var l=this.currentstep;switch(!0){case"function"==typeof e.act:e.act(t,l.toJSON(),this,e);break;case"number"==typeof e.act:this.go(e.act,"action");break;case"next"===e.act:this.next();break;case"previous"===e.act:this.previous();break;case"stop"===e.act:this.stop();break;case"complete"===e.act:this.complete();break;case"propagate"===e.act:l.target[e.event]()}"function"==typeof this._options.onAction&&this._options.onAction(t,l.toJSON(),e)}}},{key:"next",value:function(){this._active&&this.go(this.nextstep,"next")}},{key:"previous",value:function(){this._active&&this.go(this.previousstep,"previous")}},{key:"go",value:function(t,e){this._active&&this._current!==t&&(this.currentstep.hide(),this._current=v(t,0,this.length-1),this.currentstep.show(),this._options.onStep(this.currentstep,e))}},{key:"stop",value:function(){this._removeStyles(),this._active&&(this.currentstep.hide(),this._active=!1,this._overlay.remove(),this._steps.forEach(function(t){return t.remove()}),l(this._options.root).removeClass("guided-tour"),this._options.keyboardNavigation&&l(":root").off("keyup",this._keyboardHandler),this._options.restoreinitialposition&&this._initialposition&&e(this._initialposition,this._options.animationspeed),this._options.onStop(this._options))}},{key:"complete",value:function(){this._active&&(this.stop(),this._options.onComplete())}}]),q}();
